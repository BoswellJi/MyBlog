import{_ as l,c as i,b as a,o as c}from"./app-B56A7WC8.js";const o={};function d(m,e){return c(),i("div",null,e[0]||(e[0]=[a('<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><ul><li>webgl以及一般的3D图形中，一般都是在用户坐标系中 <code>建立模型</code> ( <code>物体的3D模型</code> )，然后经过一系列不同变换，将他们正确的放到一个世界坐标系中（ <code>正确的位置和方向</code> ）；</li><li>webgl中最麻烦的不是矩阵相乘，而是 为了 <code>定位</code> <code>场景中的对象</code> 和 <code>照相机的位置</code> ，需要执行一系列的不同变化；</li></ul><h2 id="变换方式" tabindex="-1"><a class="header-anchor" href="#变换方式"><span>变换方式</span></a></h2><ul><li><p>模型变换</p></li><li><p>视图变换</p></li><li><p>模型视图变换</p></li><li><p>投影变换</p></li><li><p>以上是根据 <code>顶点着色器</code> 中 <code>矩阵</code> 相乘运算实现；</p></li><li><p>透视除法</p></li><li><p>视口变换</p></li><li><p>以上是根据 <code>webgl流水线</code> 的 <code>图元装配</code> 阶段来处理;</p></li></ul><h2 id="模型变换" tabindex="-1"><a class="header-anchor" href="#模型变换"><span>模型变换</span></a></h2><ul><li><code>顶点初始坐标</code> 称为 <code>对象坐标</code> ；</li><li>模型变换用来确当模型在 <code>世界坐标系中的位置和方向</code> ；</li><li>3D场景中的每个对象都有自己的模型变换； <ul><li>模型变换通常有： <ul><li>平移 <code>mat4.translate()</code></li><li>旋转 <code>mat4.rotate()</code></li><li>缩放 <code>mat4.scale()</code></li></ul></li></ul></li><li>只需要一个4*4矩阵就可以完成全部的模型变换组合；</li><li>为了将 <code>对象的顶点</code> ，从 <code>对象坐标系</code> ，换到 <code>世界坐标系</code> ，只需要将顶点坐标乘上这个4*4矩阵；</li></ul><h2 id="视图变换" tabindex="-1"><a class="header-anchor" href="#视图变换"><span>视图变换</span></a></h2><ul><li>在3D场景中，webgl只对照相机（观察者）能够看到的对象进行绘制；</li><li>视图变换，用来确定对象在虚拟照相机中的位置和方向；</li><li>视图变换的作用实际上是设置一个矩阵；他对场景中顶点的变换效果正好跟变换照相机的效果相反；</li><li><code>虚拟：webgl并没有显式方法用来移动场景中的照相机</code> , <code>照相机</code> 总是位于原点位置，实线朝z轴负方向；</li><li>视图变换组成： <ul><li>平移 <code>mat4.translate()</code></li><li>旋转 <code>mat4.rotate()</code></li></ul></li><li>顶点经过视图变换后，它就处在眼睛坐标系中，因此就称它们为眼睛坐标;</li><li><code>mat4.lookAt()</code> : 参数：照相机的 <code>位置</code> ， <code>视线方向</code> ， <code>上方向</code> ; 可以用来替换 <code>平移，旋转</code></li></ul><h2 id="模型视图变换" tabindex="-1"><a class="header-anchor" href="#模型视图变换"><span>模型视图变换</span></a></h2><ul><li>场景中照相机和对象之间的关系；</li><li>假设一个对象，和一个照相机都位于原点位置，照相机的视线沿着z轴负方向，怎样看到对象： <ul><li>将相机向后移动；</li><li>将对象向前移动到场景中，这里将兑现沿z轴负方向移动； <code>（一般采用这个方式）</code></li></ul></li><li>当顶点乘上此举证时，直接从对象坐标系转换为眼睛坐标系；</li><li>坐标系变换： 对象坐标系 <code>* (模型变换矩阵)</code> -&gt; 世界坐标系 <code>* (视图变换矩阵)</code> -&gt; 眼睛坐标系 =》 <code>模型变换 * 视图变换 = 模型视图变换</code> ；</li></ul><h2 id="投影变换" tabindex="-1"><a class="header-anchor" href="#投影变换"><span>投影变换</span></a></h2><ul><li><code>投影变换应用在模型视图变换之后</code> ；利用它确定如何在3D场景投影到屏幕上；决定了 <code>视域体</code> 的外观；实际上是将 <code>视域体</code> 变换成一个单位立方体；</li><li>3D图形中的类比： 变换作用与用照相机拍摄部分对象的过程类比： <ul><li><code>模型变换</code> 相当于场景中定位对象；</li><li><code>视图变换</code> 相当于定位和对准照相机；</li><li><code>投影变换</code> 相当于 <code>为照相机选择一个镜头</code> ；</li><li>镜头决定了视野, 决定对象的效果；</li></ul></li><li>投影变换类型： <ul><li>正交投影 <ul><li>也叫平行投影</li><li>平行线经过投影后仍然平行；</li><li>不会因为对象距离观察者远，近影响对象的大小;</li><li><code>gl.ortho()</code> ;</li></ul></li><li>透视投影 <ul><li>距离观察者较远的对象看起来比较小;</li><li>这种投影的视域体是一个锥台;</li><li>这种投影可以提供比较真实的场景；</li><li>因为它接近于人眼的视觉原理；</li><li><code>gl.perspective()</code>；</li><li><code>gl.frustum()</code> ；</li></ul></li></ul></li></ul><h2 id="透视除法" tabindex="-1"><a class="header-anchor" href="#透视除法"><span>透视除法</span></a></h2><ul><li>顶点着色器将坐标写入gl_Position变量时，在裁剪坐标系中进行该操作，用 <code>齐次坐标系，（x,y,z,w）</code> 表示;</li><li><code>图元装配</code>期间，顶点要经过 <code>透视除法</code> : 将所有坐标除以 <code>w</code> , 是为了得到 <code>归一化的设备坐标系</code>；</li><li>裁剪坐标（x, y, z, w）与归一化设备坐标（x/w, y/w, z/w）;</li><li>这不是一个用户能显式影响结果的操作；</li></ul><h2 id="视口变换" tabindex="-1"><a class="header-anchor" href="#视口变换"><span>视口变换</span></a></h2><ul><li><code>图元装配</code>操作的一部分，但是用户可以调用下面方法影响视口变换； <ul><li><code>gl.viewPort(x,y,w,h)</code><ul><li>x，y: 视口左下角坐标</li><li>w, h: 宽，高</li><li>综合以上两者定义一个视口</li></ul></li><li><code>gl.depthRange(n,f)</code><ul><li>用户希望达到的景深范围</li><li>n: near近平面</li><li>f: far远平面</li><li>n不允许大于f,且值得范围都在【0-1】</li></ul></li></ul></li></ul>',16)]))}const h=l(o,[["render",d]]),t=JSON.parse('{"path":"/books/%E5%9B%BE%E5%BD%A2%E5%AD%A6/webgl/webgl%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/4%E5%B0%8F%E5%9E%8Bjavascript%E5%BA%93%E4%B8%8E%E8%BD%AC%E6%8D%A2/4.2%E5%8F%98%E6%8D%A2%E8%BF%90%E7%AE%97.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1735558340000,"contributors":[{"name":"jmz","username":"jmz","email":"mingzhuang.ji@ly.com","commits":6,"url":"https://github.com/jmz"},{"name":"Boswell","username":"Boswell","email":"mingzhuang.ji@ly.com","commits":4,"url":"https://github.com/Boswell"},{"name":"mingzhuang.ji","username":"","email":"mingzhuang.ji@ly.com","commits":2}],"changelog":[{"hash":"dbc456edbfbe7a16e99ef11ad04098fbad26fdc4","time":1735558340000,"email":"mingzhuang.ji@ly.com","author":"mingzhuang.ji","message":"chore: 调整结构"},{"hash":"6cd6513af962d39a4becb6d4423104c209684122","time":1702001688000,"email":"mingzhuang.ji@ly.com","author":"mingzhuang.ji","message":"feat: monorepo"},{"hash":"f2337734b6270ac051b908354dd6dccce75439f6","time":1660138466000,"email":"aiyoudqrjmz@163.com","author":"Boswell","message":"chore: 梳理"},{"hash":"40490e61600ecc7dded37e1f242086aa74489f64","time":1653880183000,"email":"aiyoudqrjmz@163.com","author":"Boswell","message":"feat: lerna"},{"hash":"a91ae3f357e5517c1fe59bdcaee35dcb7f620199","time":1627635031000,"email":"mingzhuang.ji@ly.com","author":"Boswell","message":"feat: books目录"},{"hash":"1dde0babb74363f0c17a499d62b693c8b4123c68","time":1617954954000,"email":"mingzhuang.ji@ly.com","author":"Boswell","message":"博客：整理博客"},{"hash":"cf48db9cca43f70ff1fe8b559344e85cc1ac9f9c","time":1604129744000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"项目结构：调整目录结构"},{"hash":"d50f479780aaaab8ba65a89c9940f78b4170b0ba","time":1604129744000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"项目结构：调整目录结构"},{"hash":"702f06c3634c230fd5bb9ac148c9d28522670c4c","time":1601204128000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"webgl:ppt"},{"hash":"af4bbbb9f46522a2611997c5cb61b8de7cd4619e","time":1601204128000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"webgl:ppt"},{"hash":"61b2bb735d369e9817950524f184d47d78c5bf9c","time":1599475546000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"webgl："},{"hash":"1074553375ee4107011b3daf311b8ab00b559d12","time":1599475546000,"email":"mingzhuang.ji@ly.com","author":"jmz","message":"webgl："}]},"filePathRelative":"books/图形学/webgl/webgl高级编程/4小型javascript库与转换/4.2变换运算.md"}');export{h as comp,t as data};
